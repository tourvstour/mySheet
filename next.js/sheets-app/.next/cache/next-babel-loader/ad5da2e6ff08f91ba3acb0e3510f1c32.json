{"ast":null,"code":"import _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _message from \"antd/lib/message\";\nimport React, { Component } from 'react';\nimport { withCookies } from 'react-cookie';\nimport { Login } from '../apis/datas';\nimport 'antd/dist/antd.css';\n\nclass CheckLogin extends Component {\n  componentDidMount() {\n    const {\n      cookies\n    } = this.props;\n    let user = cookies.get(\"user\"),\n        pass = cookies.get(\"password\");\n\n    if (user === undefined || pass === undefined) {\n      _message.warning(\"กรุณาทำการล็อคอินก่อนเข้าใช้งาน...\", 1).then(() => window.location.href = \"/login\");\n    } else {\n      new _Promise((resolve, reject) => {\n        resolve(Login(user, pass));\n      }).then(res => {\n        console.log(res);\n\n        if (res === false) {\n          _message.loading(\"กรุณาทำการล็อคอินก่อนเข้าใช้งาน...\", 1).then(() => window.location.href = \"/login\");\n        } else {\n          cookies.set('storeName', res.map(a => a.user_store_name));\n          cookies.set('storeNumber', res.map(a => a.user_store_number));\n          cookies.set('email', res.map(a => a.user_profiles_email));\n          cookies.set('userNumber', res.map(a => a.user_profile_number));\n        }\n      });\n    }\n  }\n\n  render() {\n    return null;\n  }\n\n}\n\nexport default withCookies(CheckLogin);","map":null,"metadata":{},"sourceType":"module"}