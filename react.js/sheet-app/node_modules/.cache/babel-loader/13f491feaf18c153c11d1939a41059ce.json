{"ast":null,"code":"import _classCallCheck from\"I:\\\\jobs\\\\react.js\\\\sheet-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"I:\\\\jobs\\\\react.js\\\\sheet-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"I:\\\\jobs\\\\react.js\\\\sheet-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"I:\\\\jobs\\\\react.js\\\\sheet-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"I:\\\\jobs\\\\react.js\\\\sheet-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import{withCookies}from'react-cookie';import{Login}from'../apis/datas';import{message}from'antd';var CheckLogin=/*#__PURE__*/function(_Component){_inherits(CheckLogin,_Component);function CheckLogin(){_classCallCheck(this,CheckLogin);return _possibleConstructorReturn(this,_getPrototypeOf(CheckLogin).apply(this,arguments));}_createClass(CheckLogin,[{key:\"componentDidMount\",value:function componentDidMount(){var cookies=this.props.cookies;var user=cookies.get(\"user\"),pass=cookies.get(\"password\");if(user===undefined||pass===undefined){message.warning(\"กรุณาทำการล็อคอินก่อนเข้าใช้งาน...\",1).then(function(){return window.location.href=\"/login\";});}else{new Promise(function(resolve,reject){resolve(Login(user,pass));}).then(function(res){// console.log(res)\nif(res===false){message.loading(\"กรุณาทำการล็อคอินก่อนเข้าใช้งาน...\",1).then(function(){return window.location.href=\"/login\";});}else{cookies.set('storeName',res.map(function(a){return a.user_store_name;}));cookies.set('storeNumber',res.map(function(a){return a.user_store_number;}));cookies.set('email',res.map(function(a){return a.user_profiles_email;}));cookies.set('userNumber',res.map(function(a){return a.user_profile_number;}));}});}}},{key:\"render\",value:function render(){return null;}}]);return CheckLogin;}(Component);export default withCookies(CheckLogin);","map":{"version":3,"sources":["I:/jobs/react.js/sheet-app/src/components/CheckLogin.jsx"],"names":["React","Component","withCookies","Login","message","CheckLogin","cookies","props","user","get","pass","undefined","warning","then","window","location","href","Promise","resolve","reject","res","loading","set","map","a","user_store_name","user_store_number","user_profiles_email","user_profile_number"],"mappings":"2wBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,WAAT,KAA4B,cAA5B,CACA,OAASC,KAAT,KAAsB,eAAtB,CACA,OAASC,OAAT,KAAwB,MAAxB,C,GAEMC,CAAAA,U,0SACkB,IACRC,CAAAA,OADQ,CACI,KAAKC,KADT,CACRD,OADQ,CAEhB,GAAIE,CAAAA,IAAI,CAAGF,OAAO,CAACG,GAAR,CAAY,MAAZ,CAAX,CACIC,IAAI,CAAGJ,OAAO,CAACG,GAAR,CAAY,UAAZ,CADX,CAGA,GAAID,IAAI,GAAKG,SAAT,EAAsBD,IAAI,GAAKC,SAAnC,CAA8C,CAC1CP,OAAO,CAACQ,OAAR,CAAgB,oCAAhB,CAAsD,CAAtD,EACKC,IADL,CACU,iBAAMC,CAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,QAA7B,EADV,EAEH,CAHD,IAGO,CACH,GAAIC,CAAAA,OAAJ,CAAY,SAACC,OAAD,CAAUC,MAAV,CAAqB,CAC7BD,OAAO,CAACf,KAAK,CAACK,IAAD,CAAOE,IAAP,CAAN,CAAP,CACH,CAFD,EAGKG,IAHL,CAGU,SAAAO,GAAG,CAAI,CACT;AACA,GAAIA,GAAG,GAAK,KAAZ,CAAmB,CACfhB,OAAO,CAACiB,OAAR,CAAgB,oCAAhB,CAAsD,CAAtD,EACKR,IADL,CACU,iBAAMC,CAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,QAA7B,EADV,EAEH,CAHD,IAGO,CACHV,OAAO,CAACgB,GAAR,CAAY,WAAZ,CAAyBF,GAAG,CAACG,GAAJ,CAAQ,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,eAAN,EAAT,CAAzB,EACAnB,OAAO,CAACgB,GAAR,CAAY,aAAZ,CAA2BF,GAAG,CAACG,GAAJ,CAAQ,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACE,iBAAN,EAAT,CAA3B,EACApB,OAAO,CAACgB,GAAR,CAAY,OAAZ,CAAqBF,GAAG,CAACG,GAAJ,CAAQ,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACG,mBAAN,EAAT,CAArB,EACArB,OAAO,CAACgB,GAAR,CAAY,YAAZ,CAA0BF,GAAG,CAACG,GAAJ,CAAQ,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACI,mBAAN,EAAT,CAA1B,EACH,CACJ,CAdL,EAeH,CACJ,C,uCACQ,CACL,MAAO,KAAP,CACH,C,wBA7BoB3B,S,EA+BzB,cAAeC,CAAAA,WAAW,CAACG,UAAD,CAA1B","sourcesContent":["import React, { Component } from 'react'\r\nimport { withCookies } from 'react-cookie'\r\nimport { Login } from '../apis/datas'\r\nimport { message } from 'antd'\r\n\r\nclass CheckLogin extends Component {\r\n    componentDidMount() {\r\n        const { cookies } = this.props\r\n        let user = cookies.get(\"user\"),\r\n            pass = cookies.get(\"password\")\r\n\r\n        if (user === undefined || pass === undefined) {\r\n            message.warning(\"กรุณาทำการล็อคอินก่อนเข้าใช้งาน...\", 1)\r\n                .then(() => window.location.href = \"/login\")\r\n        } else {\r\n            new Promise((resolve, reject) => {\r\n                resolve(Login(user, pass))\r\n            })\r\n                .then(res => {\r\n                    // console.log(res)\r\n                    if (res === false) {\r\n                        message.loading(\"กรุณาทำการล็อคอินก่อนเข้าใช้งาน...\", 1)\r\n                            .then(() => window.location.href = \"/login\")\r\n                    } else {\r\n                        cookies.set('storeName', res.map(a => a.user_store_name))\r\n                        cookies.set('storeNumber', res.map(a => a.user_store_number))\r\n                        cookies.set('email', res.map(a => a.user_profiles_email))\r\n                        cookies.set('userNumber', res.map(a => a.user_profile_number))\r\n                    }\r\n                })\r\n        }\r\n    }\r\n    render() {\r\n        return null\r\n    }\r\n}\r\nexport default withCookies(CheckLogin)"]},"metadata":{},"sourceType":"module"}