{"ast":null,"code":"import React, { Component } from 'react';\nimport { withCookies } from 'react-cookie';\nimport { Login } from '../apis/datas';\nimport { message } from 'antd';\n\nclass CheckLogin extends Component {\n  componentDidMount() {\n    const cookies = this.props.cookies;\n    let user = cookies.get(\"user\"),\n        pass = cookies.get(\"password\");\n\n    if (user === undefined || pass === undefined) {\n      message.warning(\"กรุณาทำการล็อคอินก่อนเข้าใช้งาน...\", 1).then(() => window.location.href = \"/login\");\n    } else {\n      new Promise((resolve, reject) => {\n        resolve(Login(user, pass));\n      }).then(res => {\n        // console.log(res)\n        if (res === false) {\n          message.loading(\"กรุณาทำการล็อคอินก่อนเข้าใช้งาน...\", 1).then(() => window.location.href = \"/login\");\n        } else {\n          cookies.set('storeName', res.map(a => a.user_store_name));\n          cookies.set('storeNumber', res.map(a => a.user_store_number));\n          cookies.set('email', res.map(a => a.user_profiles_email));\n          cookies.set('userNumber', res.map(a => a.user_profile_number));\n        }\n      });\n    }\n  }\n\n  render() {\n    return null;\n  }\n\n}\n\nexport default withCookies(CheckLogin);","map":{"version":3,"sources":["I:/jobs/react.js/sheet-app/src/components/CheckLogin.jsx"],"names":["React","Component","withCookies","Login","message","CheckLogin","componentDidMount","cookies","props","user","get","pass","undefined","warning","then","window","location","href","Promise","resolve","reject","res","loading","set","map","a","user_store_name","user_store_number","user_profiles_email","user_profile_number","render"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,WAAT,QAA4B,cAA5B;AACA,SAASC,KAAT,QAAsB,eAAtB;AACA,SAASC,OAAT,QAAwB,MAAxB;;AAEA,MAAMC,UAAN,SAAyBJ,SAAzB,CAAmC;AAC/BK,EAAAA,iBAAiB,GAAG;AAAA,UACRC,OADQ,GACI,KAAKC,KADT,CACRD,OADQ;AAEhB,QAAIE,IAAI,GAAGF,OAAO,CAACG,GAAR,CAAY,MAAZ,CAAX;AAAA,QACIC,IAAI,GAAGJ,OAAO,CAACG,GAAR,CAAY,UAAZ,CADX;;AAGA,QAAID,IAAI,KAAKG,SAAT,IAAsBD,IAAI,KAAKC,SAAnC,EAA8C;AAC1CR,MAAAA,OAAO,CAACS,OAAR,CAAgB,oCAAhB,EAAsD,CAAtD,EACKC,IADL,CACU,MAAMC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,QADvC;AAEH,KAHD,MAGO;AACH,UAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAC7BD,QAAAA,OAAO,CAAChB,KAAK,CAACM,IAAD,EAAOE,IAAP,CAAN,CAAP;AACH,OAFD,EAGKG,IAHL,CAGUO,GAAG,IAAI;AACT;AACA,YAAIA,GAAG,KAAK,KAAZ,EAAmB;AACfjB,UAAAA,OAAO,CAACkB,OAAR,CAAgB,oCAAhB,EAAsD,CAAtD,EACKR,IADL,CACU,MAAMC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,QADvC;AAEH,SAHD,MAGO;AACHV,UAAAA,OAAO,CAACgB,GAAR,CAAY,WAAZ,EAAyBF,GAAG,CAACG,GAAJ,CAAQC,CAAC,IAAIA,CAAC,CAACC,eAAf,CAAzB;AACAnB,UAAAA,OAAO,CAACgB,GAAR,CAAY,aAAZ,EAA2BF,GAAG,CAACG,GAAJ,CAAQC,CAAC,IAAIA,CAAC,CAACE,iBAAf,CAA3B;AACApB,UAAAA,OAAO,CAACgB,GAAR,CAAY,OAAZ,EAAqBF,GAAG,CAACG,GAAJ,CAAQC,CAAC,IAAIA,CAAC,CAACG,mBAAf,CAArB;AACArB,UAAAA,OAAO,CAACgB,GAAR,CAAY,YAAZ,EAA0BF,GAAG,CAACG,GAAJ,CAAQC,CAAC,IAAIA,CAAC,CAACI,mBAAf,CAA1B;AACH;AACJ,OAdL;AAeH;AACJ;;AACDC,EAAAA,MAAM,GAAG;AACL,WAAO,IAAP;AACH;;AA7B8B;;AA+BnC,eAAe5B,WAAW,CAACG,UAAD,CAA1B","sourcesContent":["import React, { Component } from 'react'\r\nimport { withCookies } from 'react-cookie'\r\nimport { Login } from '../apis/datas'\r\nimport { message } from 'antd'\r\n\r\nclass CheckLogin extends Component {\r\n    componentDidMount() {\r\n        const { cookies } = this.props\r\n        let user = cookies.get(\"user\"),\r\n            pass = cookies.get(\"password\")\r\n\r\n        if (user === undefined || pass === undefined) {\r\n            message.warning(\"กรุณาทำการล็อคอินก่อนเข้าใช้งาน...\", 1)\r\n                .then(() => window.location.href = \"/login\")\r\n        } else {\r\n            new Promise((resolve, reject) => {\r\n                resolve(Login(user, pass))\r\n            })\r\n                .then(res => {\r\n                    // console.log(res)\r\n                    if (res === false) {\r\n                        message.loading(\"กรุณาทำการล็อคอินก่อนเข้าใช้งาน...\", 1)\r\n                            .then(() => window.location.href = \"/login\")\r\n                    } else {\r\n                        cookies.set('storeName', res.map(a => a.user_store_name))\r\n                        cookies.set('storeNumber', res.map(a => a.user_store_number))\r\n                        cookies.set('email', res.map(a => a.user_profiles_email))\r\n                        cookies.set('userNumber', res.map(a => a.user_profile_number))\r\n                    }\r\n                })\r\n        }\r\n    }\r\n    render() {\r\n        return null\r\n    }\r\n}\r\nexport default withCookies(CheckLogin)"]},"metadata":{},"sourceType":"module"}